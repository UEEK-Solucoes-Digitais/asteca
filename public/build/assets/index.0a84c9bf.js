import"./mascaras.56988819.js";window.validateInputs=function(a){editors.forEach(function(e){e.updateSourceElement()});let t=!0;return $(".required").css({"border-color":"#E8E8E8"}),a.find("input.required, textarea.required, select.required").each(function(){if($(this).val()==""||$(this).val()==null)return $(this).css("border-color","#be0007").focus(),t=!1,t}),t};window.validateImages=function(a){let t=!0,e="<p class='warning' style='color: #BE0007'>Imagem obrigat\xF3ria!</p>";return $(".warning")&&$(".warning").remove(),$(".required").css({"box-shadow":"unset"}),a.find('input[type="file"]').each(function(){if($(this).hasClass("required")&&document.getElementById($(this).attr("id")).files.length==0)return $(this).css({"-webkit-box-shadow":"inset 0 0 0 1px #BE0007","box-shadow":"inset 0 0 0 1px #BE0007"}).focus(),$(e).appendTo($(this).parent()),t=!1,t}),t};window.validatePassword=function(){if($('input[name="password"]').length>0&&$('input[name="confirm_password"]').length>0){let a=$('input[name="password"]'),t=$('input[name="confirm_password"]');if(t.val()!=""&&t.val()!==a.val())return a.addClass("red-border").focus(),t.addClass("red-border").focus(),showModalSmallResponse("As senhas precisam ser iguais.","error"),!1}return!0};$("#form-login").submit(function(a){a.preventDefault();let t=new FormData(document.getElementById("form-login"));$.ajax({type:"POST",url:url_login,data:t,dataType:"json",mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1,complete:function(e){if(e.responseText==1){$(".error-text").css({opacity:0,visibility:"hidden"}),window.location=url_to_redirect;return}else return $(".error-text").css({opacity:1,visibility:"visible"}),!1}})});var r=function(){window.location.href=url_to_redirect},u=function(a){var t=new FormData(document.querySelectorAll(".geral-form")[0]);$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(o){if(o.lengthComputable){var i=o.loaded/o.total*100;i=Math.round(i),$(".loading-form").width(i+"%")}},!1),e},url:a,type:"POST",data:t,dataType:"json",mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".loading-form").width("0%")},success:function(e){$('input[type="submit"]').removeClass("disabled"),e.status==1?(showModalSmallResponse(e.msg,"success"),setTimeout(r(),2e3)):showModalSmallResponse(e.msg,"error")},error:function(e){$('input[type="submit"]').removeClass("disabled"),showModalSmallResponse("Ocorreu um erro ao efetuar a opera\xE7\xE3o. Por favor, entre em contato com o Suporte.","error")}})};$(".geral-form").submit(function(a){let t=$(this);a.preventDefault(),validateInputs(t)&&validateImages(t)&&validatePassword(t)&&($('input[type="submit"]').addClass("disabled"),u(url))});$(".remove-item").click(function(){var a=$(this).data("value"),t=confirm("Deseja realmente remover este item? Esta a\xE7\xE3o \xE9 irrevers\xEDvel.");t&&$.ajax({url:url_delete,type:"PUT",dataType:"JSON",data:{id:a,_token:$('input[name="_token"]').val()},success:function(e){(e.status==1||e.status==2)&&(showModalSmallResponse(e.msg,"success"),setTimeout(r,2e3))},error:function(e){showModalSmallResponse("Ocorreu um erro ao efetuar a opera\xE7\xE3o. Por favor, entre em contato com o Suporte.","error")}})});$(".remove-multiple-itens").click(function(){let a=[];$("input[name='delete-itens[]']").each(function(){$(this).prop("checked")&&a.push($(this).val())});var t=confirm("Deseja realmente remover estes itens? Esta a\xE7\xE3o \xE9 irrevers\xEDvel.");t&&$.ajax({url:url_delete_multiple,type:"PUT",dataType:"JSON",data:{inputs:a,_token:$('input[name="_token"]').val()},success:function(e){(e.status==1||e.status==2)&&(showModalSmallResponse(e.msg,"success"),setTimeout(r(),2e3))},error:function(e){showModalSmallResponse("Ocorreu um erro ao efetuar a opera\xE7\xE3o. Por favor, entre em contato com o Suporte.","error")}})});$(".copy-multiple-itens").click(function(){let a=[];$("input[name='delete-itens[]']").each(function(){$(this).prop("checked")&&a.push($(this).val())});var t=confirm("Deseja realmente duplicar estes itens?");t&&$.ajax({url:url_copy,type:"PUT",dataType:"JSON",data:{inputs:a,_token:$('input[name="_token"]').val()},success:function(e){(e.status==1||e.status==2)&&(showModalSmallResponse(e.msg,"success"),setTimeout(r(),2e3))},error:function(e){showModalSmallResponse("Ocorreu um erro ao efetuar a opera\xE7\xE3o. Por favor, entre em contato com o Suporte.","error")}})});$(".tdbody-to-sortable").sortable({axis:"y",update:function(a,t){var e=$(this).sortable("serialize");$.ajax({data:e+"&"+$.param({_token:$('input[name="_token"]').val()}),type:"PUT",url:url_organize})}});$("input[name='images']").on("change",function(a){var t=document.getElementById("images").files.length;$(".images-to-add .preview-img").not(".div-to-add").remove();for(var e=0;e<t;e++){var o=document.getElementById("images").files[e];if(!o.type.includes("image"))return showModalSmallResponse("Selecione apenas imagens! (Formatos jpg, png ou gif)","error"),!1;let n=$(".preview-img.div-to-add").clone();n.removeClass("div-to-add"),n.find(".alt-text").removeAttr("hidden");var i=new FileReader;i.onload=function(s){n.css("background-image","url("+s.target.result+")").addClass("w-background")},i.readAsDataURL(o),$(".div-to-add").before(n)}});$(".geral-gallery-form").submit(function(a){a.preventDefault();var t=document.getElementById("images").files.length;if(t>20)return showModalSmallResponse("Selecione 20 imagens por vez! (Formatos jpg, png ou gif)","error"),!1;if(t==0)return showModalSmallResponse("Selecione ao menos uma imagem para poder fazer o upload.","error"),!1;var e=new FormData;e.append("image_count",t);let o=[];$("input[name='image_alt[]']").each(function(){o.push($(this).val())}),e.append("image_alt",o),e.append("_token",$("input[name='_token']").val()),e.append("item_id",$("input[name='item_id']").val()),e.append("type",$("input[name='type']").val());for(var i=0;i<t;i++){var n=document.getElementById("images").files[i];if(!n.type.includes("image"))return showModalSmallResponse("Selecione apenas imagens! (Formatos jpg, png ou gif)","error"),!1;$(".preview-img.div-to-add").clone().removeClass("div-to-add"),e.append("image"+i,n)}$('input[type="submit"]').addClass("disabled"),$.ajax({xhr:function(){var s=new window.XMLHttpRequest;return s.upload.addEventListener("progress",function(l){if(l.lengthComputable){var d=l.loaded/l.total*100;d=Math.round(d),$(".loading-form").width(d+"%")}},!1),s},url,type:"POST",data:e,processData:!1,contentType:!1,dataType:"json",beforeSend:function(){$(".loading-form").width("0%")},success:function(s){$('input[type="submit"]').removeClass("disabled"),s.status==1?(showModalSmallResponse(s.msg,"success"),setTimeout(()=>{window.location.reload()},2e3)):showModalSmallResponse(s.msg,"error")},error:function(s){$('input[type="submit"]').removeClass("disabled"),showModalSmallResponse("Ocorreu um erro ao efetuar a opera\xE7\xE3o. Por favor, entre em contato com o Suporte.","error")}})});$(".input_image_alt").on("blur",function(){let a=$(this).parents(".image-item").find(".id").val(),t=$(this).parent().find(".alt").val();$(".input_image_alt").addClass("disabled"),$.ajax({url:url_update,type:"POST",dataType:"JSON",data:{id:a,alt_text:t,_token:$("input[name='_token']").val()},success:function(e){$(".input_image_alt").removeClass("disabled"),e.status!=1&&showModalSmallResponse(e.msg,"error")},error:function(e){$(".input_image_alt").removeClass("disabled"),showModalSmallResponse("Ocorreu um erro interno de sistema, tente novamente mais tarde.","error")}})});$(".remove-gallery-image").click(function(){var a=$(this).data("value"),t=confirm("Deseja realmente remover este item? Esta a\xE7\xE3o \xE9 irrevers\xEDvel.");t&&$.ajax({url:url_delete,type:"POST",dataType:"JSON",data:{id:a,_token:$("input[name='_token']").val()},success:function(e){(e.status==1||e.status==2)&&(showModalSmallResponse(e.msg,"success"),setTimeout(r,2e3))}})});$("#crud-map").locationpicker({location:{latitude:$("#latitude").val(),longitude:$("#longitude").val()},radius:0,zoom:10,inputBinding:{latitudeInput:$("#latitude"),longitudeInput:$("#longitude")}});window.pathArray=window.location.pathname.split("/");window.currentLocation=pathArray[2];window.editors=[];window.getCookie=function(a){for(var t=a+"=",e=decodeURIComponent(document.cookie),o=e.split(";"),i=0;i<o.length;i++){for(var n=o[i];n.charAt(0)==" ";)n=n.substring(1);if(n.indexOf(t)==0)return n.substring(t.length,n.length)}return""};window.setCookie=function(a,t,e){var o=new Date;o.setTime(o.getTime()+e*24*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=a+"="+t+";"+i+";path=/"};window.showAlertDialog=function(a,t){$("#infoModalText").html(a),t||$("#infoModalOkBtn").hide(),$("#infoModal").modal()};window.openModal=function(a){a!=""&&($("#"+a).addClass("show"),$("body, html").css({overflow:"hidden",height:"100%"}))};window.closeModal=function(a){a!=""&&($("#"+a).removeClass("show"),$("body, html").css({overflow:"auto",height:"auto"}))};window.showModalSmallResponse=function(a,t){let e=$(".small-notifications-area"),o;var i="";t=="success"?o="<iconify-icon icon='akar-icons:check' class='success'></iconify-icon>":t=="error"&&(o="<iconify-icon icon='clarity:times-line' class='error'></iconify-icon>"),i="<div class='box-small-response'>"+o+"<p class='message'>"+a+"</p></div>",e.append(i),$(".box-small-response").each(function(n){let s=$(this);s.css("visibility","visible"),s.css("opacity","1"),setTimeout(function(){s.fadeOut(300,function(){$(this).remove()})},5e3)})};window.padNumber=function(a,t){for(var e=a+"";e.length<t;)e="0"+e;return e};window.clickInput=function(){$(".preview-img").on("click",function(){$(this).parents(".image-preview").find("input[type='file']").click()})};window.checkFile=function(){$("input[type='file']").on("change",function(a){if($(this).attr("name")!="images"){var t=a.target.files;t[0].name;var e=t[0].type,o=$(this);if(!e.includes("image"))showModalSmallResponse("Formato n\xE3o suportado! Suba apenas imagens","error"),o.parent().find(".preview-img").css("background","none").removeClass("w-background"),o.val("");else if(t&&t[0]){var i=new FileReader;i.onload=function(n){o.parent().find(".preview-img").css("background-image","url("+n.target.result+")").addClass("w-background")},i.readAsDataURL(t[0])}}})};$(document).on("change",".multiple-delete",function(){if($(this).prop("checked"))$(".btn-multiple-actions").css("opacity",1).css("visibility","visible");else{let a=0;$(".multiple-delete").each(function(){$(this).prop("checked")&&a++}),a==0&&$(".btn-multiple-actions").css("opacity",0).css("visibility","hidden")}});$(".plus-item").on("click",function(){let a=$(this).data("value"),t="."+a,e=$($(t+" .default-input-group")[0]).clone();e.find("input").val(""),$(t+" .buttons").before(e),$(t+" .less-item").removeAttr("hidden")});$(".less-item").on("click",function(){let a=$(this).data("value"),t="."+a,e=$(t+" .default-input-group");$(e[e.length-1]).remove(),e=$(t+" .default-input-group"),e.length==1&&$(t+" .less-item").attr("hidden",!0)});currentLocation.includes("lancamento")&&($('input[name="percentage_done"]').on("blur",function(a){$(this).val()>100?$(this).val(100):$(this).val()<0&&$(this).val(0)}),$("#crud-map").locationpicker({location:{latitude:$("#latitude").val(),longitude:$("#longitude").val()},radius:0,zoom:10,inputBinding:{latitudeInput:$("#latitude"),longitudeInput:$("#longitude")}}));$(document).ready(function(){$(".nav-toggle, aside .background").on("click",function(){$("aside.general-dashboard-aside").toggleClass("open"),$("aside.general-dashboard-aside.open").length>0?$("body").addClass("fixed-position"):$("body").removeClass("fixed-position")}),$(".ckeditor-text").each(function(a){let t=$(this).attr("id");t!=""&&typeof t<"u"&&ClassicEditor.create(document.querySelector("#"+t),{toolbar:{shouldNotGroupWhenFull:!0}}).then(e=>{editors[a]=e}).catch(e=>{console.error(e)})}),$("#dataTable").DataTable(),$("input[name='select-all']").on("change",function(){$(this).prop("checked")?$(".multiple-delete").each(function(){$(this).prop("checked",!0)}):$(".multiple-delete").each(function(){$(this).prop("checked",!1)})}),$("input[name='light_mode']").on("change",function(){$(this).prop("checked")?($("body").removeClass("light-mode"),setCookie(`${cacheName}_light_mode`,0)):($("body").addClass("light-mode"),setCookie(`${cacheName}_light_mode`,1))}),clickInput(),checkFile()});$("#crud-map").locationpicker({location:{latitude:$("#latitude").val(),longitude:$("#longitude").val()},radius:0,zoom:10,inputBinding:{latitudeInput:$("#latitude"),longitudeInput:$("#longitude")}});
